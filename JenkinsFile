pipeline{


agent any // bu pipeline dosyasında her hangşi bir özel agent eklemedik
// jenkins içerisinde jdk ve maven ı tanımladık. Bu sayede localdeki jdk ve maven a bakmayacak.
tools{
    jdk 'JDK21'
    maven 'Maven-3.9'
}

// stages sırayla jenkins in çalıştıracağı komutlar
stages {
//ilk adımda github tan projeyi çekip , master branche checkout oluyor
    stage('Checkout'){
        steps{
            git branch: 'master',
            url:'https://github.com/ramazandogaan/testng_project.git'
    }

    }
// 2. stepte testleri çalıştırıyor
    stage('Run Test'){
        steps {
                //Mac için
                 // sh 'mvn clean test'
               //Windows
           bat 'mvn clean test'
        }

    }
    stage('Generate Allure Report'){
        steps{
        // allure result un oluşturdugu klasörü tanımladık
            allure([
                results: [[path: 'target/allure-results']]

            ])
    }

    }
}
}
}